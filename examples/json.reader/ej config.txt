{"block_expression":"match('(?:Cash Has Taken|Cash Retract\\/No Cash In Transport|Fund Transfer Completed)', block or '')
and match or match('Cash Unit Value\\s+:\\s+1000\\n.*?Cash Unit Count\\s+:\\s+(?!0)(\\d+)\\n.*?Cash Unit Initial Count\\s+:\\s+(?!0)\\\\1\\n',
refill_block or '')","block_regex":"((?:Trx Started|Card Inserted OK|EMV FLOW)(?:.*\\n)*?.*?Remaining Cash Units Counts(?:.*\\n)*?.*?(?:Trx End:CardRemoved|-Wait For Card-|Card Read OK))","config":[{"display_name":"Terminal ID","name":"terminal_id","validation":{"required":false,"type":"string"}},{"display_name":"TXN Date","name":"txn_date","validation":{"pre_validation":"strftime(strptime(txn_date, '%d%m%Y'))","required":true,"type":"date"}},{"display_name":"Txn Type","name":"txn_type","validation":{"required":false,"type":"string"}},{"display_name":"TRX No","name":"trx_no","validation":{"required":false,"type":"string"}},{"display_name":"Card No","name":"card_no","validation":{"required":false,"type":"string"}},{"display_name":"Txn Amount","name":"txn_amount","validation":{"required":false,"type":"decimal"}},{"display_name":"Currency","name":"currency","validation":{"required":false,"type":"string"}},{"display_name":"Trace ID","name":"trace_id","validation":{"required":false,"type":"string"}},{"display_name":"Trace ID1","name":"trace_id1","validation":{"required":false,"type":"string"}},{"display_name":"Response","name":"response","validation":{"required":false,"type":"string"}},{"display_name":"Account no","name":"account_no","validation":{"required":false,"type":"string"}},{"display_name":"Status","name":"status","validation":{"required":false,"type":"string"}},{"display_name":"Deno1","name":"deno1","validation":{"required":false,"type":"decimal"}},{"display_name":"Deno2","name":"deno2","validation":{"required":false,"type":"decimal"}},{"display_name":"Count1","name":"count1","validation":{"required":false,"type":"decimal"}},{"display_name":"Count2","name":"count2","validation":{"required":false,"type":"decimal"}},{"display_name":"Reject1","name":"reject1","validation":{"required":false,"type":"decimal"}},{"display_name":"Reject2","name":"reject2","validation":{"required":false,"type":"decimal"}},{"display_name":"Total Count1","name":"total_count1","validation":{"required":false,"type":"decimal"}},{"display_name":"Total Count2","name":"total_count2","validation":{"required":false,"type":"decimal"}}],"extra_block_fields":"(?:Trx Started|Card Read OK|EMV FLOW|Menu Button Enabled)(?:.*\\n)*?.*?Card Number\\s+:\\s+(?P<card_no>\\d+.*?\\d+)","refill_block_regex":"(Cash Load Started(?:.*\\n)*?.*?CASSETTE(?:.*\\n)*?.*?-Wait For Card-)","refill_regex":"(?P<card_no>Cash Load) Started.*(?:\\n|.)*?Cash Unit Type\\s+:\\s+TYPE_BILL_CASSETTE.*\\n.*?Cash Unit Value\\s+:\\s+(?P<deno1>1000).*\\n.*?Cash Unit Count\\s+:\\s+(?!0)(?P<count1>\\d+)\\n.*?Cash Unit Initial Count\\s+:\\s+(?!0)(?P<total_count1>\\3)\\n.*?Cash Unit Reject Count\\s+:\\s+(?P<reject1>0).*(?:\\n|.)*?(?:Cash Unit Type\\s+:\\s+TYPE_BILL_CASSETTE.*\\n.*?Cash Unit Value\\s+:\\s+(?P<deno2>500).*\\n.*?Cash Unit Count\\s+:\\s+(?!0)(?P<count2>\\d+)\\n.*?Cash Unit Initial Count\\s+:\\s+(?!0)(?P<total_count2>\\7)\\n.*?Cash Unit Reject Count\\s+:\\s+(?P<reject2>0).*(?:\\n|.)*?)?AUX NO\\s+:\\s+\\:.*\\:(?P<terminal_id>\\w{8})(?:.*\\n)*?.*?\\[(?P<txn_date>\\d+).*?Response Code\\s+:\\s+(?P<response>\\d*).*(?:.*\\n)*?.*?Trace ID\\s+:\\s+(?P<trace_id>\\d*)","regex":"(?P<txn_type>Fast Cash|Cash Withdraw Initiated|Cardless Cash Request|Fund Transfer)(?:.*\\n)*?.*?(?:AUX NO|Aux Number)\\s+:\\s+(?:\\:.*\\:)?(?P<terminal_id>\\w{8})(?:.*\\n)*?.*?\\[(?P<txn_date>\\d+).*?(?:Fast Cash Completed OK|Withdraw Status : OK|Cardless Cash Request Successful|Fund Transfer Completed)(?:(?:.*\\n)*?.*?(?:Account\\s+:\\s+(?P<account_no>\\d*)|)(?:.*\\n)*?.*?)?Trace ID\\s+:\\s+(?P<trace_id>\\d+|)(?:(?:.*\\n)*?.*?(?:TRX NO\\s+:\\s+(?P<trx_no>\\w*|)(?:.*\\n)*?.*?)?Dispense Command Executed(?:.*\\n)*?.*?Amount\\s+:\\s+(?P<txn_amount>\\d+)(?:.*\\n)*?.*?Currency\\s+:\\s+(?P<currency>\\w+)\\n(?:.*\\n)*?.*?(?!Cash Retract Completed)(?:Cash Has Taken|Cash Retract\\/No Cash In Transport)(?:.*\\n)*?.*Remaining Cash Units Counts.*(?:.*\\n)*?.*BILL\\s*\\|\\s*NPR\\s*\\|\\s*(?P<deno1>1000|0500)\\s*\\|\\s*\\d+\\s*\\|\\s*(?P<count1>\\d+)\\s*\\|\\s*(?P<reject1>\\d+)\\s*?\\|\\s*(?!MISS)\\w+.*(?:\\n|.)*?BILL\\s*\\|\\s*NPR\\s*\\|\\s*(?P<deno2>0500|1000)\\s*\\|\\s*\\d+\\s*\\|\\s*(?P<count2>\\d+)\\s*\\|\\s*(?P<reject2>\\d+).*)?(?:.*\\n)*?.*?(?:Cash Withdraw Confirm(?:.*\\n)*?.*?)?(?:Response.*?:\\s*(?P<response>\\d+|)(?:.*\\n)*?.*?)?(?:Trace ID\\s+:\\s+(?P<trace_id1>\\d+|)(?:.*\\n)*?.*?)?(?:Cash Withdraw Confirm\\s+(?P<status>\\w+)(?:.*\\n)*?.*?)?(?:Trx End:CardRemoved|-Wait For Card-|Card Inserted OK|Menu Button Enabled)"},

{"amount":"txn_amount if txn_amount else ((decimal((deno1 if deno1 else 0)*(total_count1 if total_count1 else 0) + (deno2 if deno2 else 0)*(total_count2 if total_count2 else 0))) or 0)","card_no":"card_no","closing_balance":"(decimal((deno1 if deno1 else 0)*((count1 if count1 else 0)+(reject1 if reject1 else 0)) + (deno2 if deno2 else 0)*((count2 if count2 else 0)+(reject2 if reject2 else 0))) or 0)","description":"(txn_type if txn_type else '')+' - '+(card_no if card_no else '')+ ' - ' + ((trace_id if (trace_id and (txn_type == 'Cash Withdraw Initiated' or txn_type=='Fast Cash' or  txn_type=='Fund Transfer')) else '') or (trace_id1 if (trace_id1 and (txn_type == 'Cardless Cash Request')) else ''))","reconcile":"True","source_id":"terminal_id","trace_id_match":"trace_id if (trace_id and (txn_type == 'Cash Withdraw Initiated' or txn_type=='Fast Cash' or  txn_type=='Fund Transfer')) else trace_id1","transaction_id":"trace_id if (trace_id and (txn_type == 'Cash Withdraw Initiated' or txn_type=='Fast Cash' or  txn_type=='Fund Transfer')) else trace_id1","txn_date":"txn_date","type":"'D' if txn_type else 'C'"}